import{_ as w,r as d,c as f,a as s,w as c,b as o,v as a,e as p,d as x,f as b,g as U,h as C,o as y,E as l,U as m}from"./index-CYouiCzL.js";const E={class:"register-container"},V={class:"register-form"},_={class:"input-group"},h={class:"input-group"},k={class:"input-group"},M={class:"input-group"},q={class:"login-link"},A={__name:"Register",setup(B){const g=C(),r=d({username:"",email:"",password:""}),i=d(""),v=async()=>{if(r.value.password!==i.value){l.error("两次输入的密码不一致");return}try{if((await m.getAllUsers()).find(t=>t.username===r.value.username)){l.error("用户名已存在");return}const u={username:r.value.username,email:r.value.email,password:r.value.password,bio:"新用户",avatar:`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Ccircle cx='40' cy='40' r='40' fill='%23${Math.floor(Math.random()*16777215).toString(16)}'/%3E%3Ctext x='50%25' y='55%25' dominant-baseline='middle' text-anchor='middle' fill='white' font-size='30' font-weight='bold'%3E${r.value.username.charAt(0).toUpperCase()}%3C/text%3E%3C/svg%3E`,postsCount:0,followersCount:0,followingCount:0,createdAt:new Date().toISOString().slice(0,19).replace("T"," ")};await m.createUser(u),l.success("注册成功，请登录"),g.push("/login")}catch(n){console.error("注册失败:",n),l.error("注册失败，请稍后重试")}};return(n,e)=>{const u=U("router-link");return y(),f("div",E,[s("div",V,[e[11]||(e[11]=s("h2",{class:"register-title"},"用户注册",-1)),s("form",{onSubmit:c(v,["prevent"])},[s("div",_,[e[4]||(e[4]=s("label",{for:"reg-username"},"用户名",-1)),o(s("input",{type:"text",id:"reg-username","onUpdate:modelValue":e[0]||(e[0]=t=>r.value.username=t),placeholder:"请输入用户名",required:""},null,512),[[a,r.value.username]])]),s("div",h,[e[5]||(e[5]=s("label",{for:"reg-email"},"邮箱",-1)),o(s("input",{type:"email",id:"reg-email","onUpdate:modelValue":e[1]||(e[1]=t=>r.value.email=t),placeholder:"请输入邮箱地址",required:""},null,512),[[a,r.value.email]])]),s("div",k,[e[6]||(e[6]=s("label",{for:"reg-password"},"密码",-1)),o(s("input",{type:"password",id:"reg-password","onUpdate:modelValue":e[2]||(e[2]=t=>r.value.password=t),placeholder:"请输入密码",required:""},null,512),[[a,r.value.password]])]),s("div",M,[e[7]||(e[7]=s("label",{for:"reg-confirm-password"},"确认密码",-1)),o(s("input",{type:"password",id:"reg-confirm-password","onUpdate:modelValue":e[3]||(e[3]=t=>i.value=t),placeholder:"请再次输入密码",required:""},null,512),[[a,i.value]])]),e[8]||(e[8]=s("button",{type:"submit",class:"register-btn"},"注册",-1))],32),s("div",q,[s("p",null,[e[10]||(e[10]=p("已有账户？",-1)),x(u,{to:"/login"},{default:b(()=>[...e[9]||(e[9]=[p("立即登录",-1)])]),_:1})])])])])}}},S=w(A,[["__scopeId","data-v-393ca803"]]);export{S as default};
//# sourceMappingURL=Register-3nFIVipO.js.map
